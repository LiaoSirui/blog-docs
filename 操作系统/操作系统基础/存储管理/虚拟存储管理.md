## 虚拟存储器

### 虚拟机存储器简介

存储管理方案中，必须为每个作业分配足够的空间，以便装入全部信息；当主存空间不能满足作业要求时，作业无法装入主存执行；如果一个作业只部分装入主存便可开始启动运行，其余部分暂时留在磁盘上，在需要时再装入主存，这样可以有效地利用主存空间

在具有层次结构存储器的计算机中，虚拟存储器是为用户提供一个比主存储器大得多的可随机访问的地址空间的技术；虚拟存储器使**辅助存储器和主存储器**密切配合，从用户角度看，该系统所具有的主存容量将比实际主存容量大得多

虚拟存储器是为了扩大主存容量而采用的一种设计方法，其容量是由计算机的地址结构决定的

虚拟存储器的地址称为虚地址或者逻辑地址

### 程序的局限性

早在 1968 年 PDenning 就指出，程序在执行时将呈现出局部性规律：即在一段时间内，程序的执行仅局限于某个部分；相应地，它所访问的存储空间也局限于某个区域内

程序的局限性表现在两个方面：

- 时间局限性

是指如果程序中的某条指令一旦执行，则不久的将来该指令可能再次被执行，如果某个存储单元被访问，则不久以后该存储单元可能再次被访问

产生时间局限性的典型原因是在程序中存在着大量的循环操作

- 空间局限性

是指一旦程序访问了某人存储单元，则在不久的将来，其附近的存储单元也最有可能被访问

即程序在一段时间内所访问的地址可能集中在一定的范围内，其典型原因为程序是顺序执行的

## 虚拟存储器的实现

虚拟存储器是具有请求调入功能和置换功能，能仅把作业的一部分装入主存便可运行作业的存储器系统，是能从逻辑上对主存容量进行扩充的一种虚拟的存储器系统

其逻辑容量由主存和外存容量之和以及 CPU 可寻址的范围来决定，其运行速度接近于主存速度，成本也下降

可见，虚拟存储技术是一种性能非常优越的存储器管理技术，故被广泛地应用于大、中、小型机器和微型机中

虚拟存储器的实现主要有如下 3 种方式：

- 请求分页系统

该系统是在分页系统的基础上增加了请求调页功能和页面置换功能所形成的页式虚拟存储系统

它允许只装入若干页的用户程序和数据（而非全部程序）就可以启动运行，以后再通过调页功能和页面置换功能陆续把将要使用的页面调入主存，同时把暂不运行的页面置换到外存上，置换时以页面为单位

- 请求分段系统

该系统是在分段系统的基础上增加了请求调段和分段置换功能所形成的段式虚拟存储系统

它允许只装入若干段的用户程序和数据就可以启动运行，以后再通过调段功能和置换功能将不运行的段调出，同时调入将要运行的段，注意，置换时以段为单位

- 请求段页式系统

该系统是在段页式系统的基础上增加了请求调页和页面置换功能所形成的段页式虚拟存储系统

### 请求分页系统

### 请求分段系统

### 请求段页式系统

