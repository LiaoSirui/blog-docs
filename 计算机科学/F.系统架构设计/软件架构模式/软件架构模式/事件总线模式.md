事件总线模式（Even-Source）是一种常见的架构模式，它可以帮助我们实现解耦，使不同组件之间的通信更加简单和高效

它的工作原理是，当组件发生变化时，它会发出一个事件，其他组件可以订阅这个事件，然后根据自己的需要做出相应的处理

这种架构模式可以有效地改善系统的可维护性和可扩展性

使用场景：

- 在组件之间传递消息时，如消息总线或事件总线
- 在异步编程中，如消息队列或其他类型的通信机制

![img](.assets/%E4%BA%8B%E4%BB%B6%E6%80%BB%E7%BA%BF%E6%A8%A1%E5%BC%8F/4366140-cc8a6bb53e7def57.png)

CQRS 模式通常基事件溯源模式。在传统的体系结构中，使用同一数据模型查询和更新数据库。这十分简单，非常适用于基本的 CRUD 操作。但是，在更复杂的应用程序中，此方法会变得难以操作

- 在读取方面，应用程序可能执行大量不同的查询，返回具有不同形状的数据传输对象 (DTO)，对象映射可能会变得复杂
- 在写入方面，模型可能实施复杂验证和业务逻辑，结果，模型执行太多操作，过度复杂

CQRS（命令查询的责任分离 Command Query Responsibility Segregation ）将读取和写入操作分成不同的模型，使用 命令 更新数据，并使用 查询 来读取数据