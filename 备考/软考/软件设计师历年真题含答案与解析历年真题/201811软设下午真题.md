## 第 1 题

### 问题

阅读下列说明和图，回答问题 1 至问题 4，将解答填入答题纸的对应栏内。

【说明】

某房产中介连锁企业欲开发一个基于 Web 的房屋中介信息系统，以有效管理房源和客户，提高成交率。该系统的主要功能是：

1. 房源采集与管理。系统自动采集外部网站的潜在房源信息，保存为潜在房源。由经纪人联系确认的潜在房源变为房源，并添加出售 / 出租房源的客户。由经纪人或客户登记的出售 / 出租房源，系统将其保存为房源。房源信息包括基本情况、配套设施、交易类型、委托方式、业主等。经纪人可以对房源进行更新等管理操作。
2. 客户管理。求租 / 求购客户进行注册、更新，推送客户需求给经纪人，或由经纪人对求租 / 求购客户进行登记、更新。客户信息包括身份证号、姓名、手机号、需求情况、委托方式等。
3. 房源推荐。根据客户的需求情况（求购 / 求租需求情况以及出售 / 出租房源信息），向已登录的客户推荐房源。
4. 交易管理。经纪人对租售客户双方进行交易信息管理，包括订单提交和取消，设置收取中介费比例。财务人员收取中介费之后，表示该订单已完成，系统更新订单状态和房源状态，向客户和经纪人发送交易反馈。
5. 信息查询。客户根据自身查询需求查询房屋供需信息。

现采用结构化方法对房屋中介信息系统进行分析与设计，获得如图 1-1 所示的上下文数据流图和图 1-2 所示的 0 层数据流图。

![img](.assets/201811%E8%BD%AF%E8%AE%BE%E4%B8%8B%E5%8D%88%E7%9C%9F%E9%A2%98/c0fecdd2a32345f8ab7cb31847aa148e_.png)

![img](.assets/201811%E8%BD%AF%E8%AE%BE%E4%B8%8B%E5%8D%88%E7%9C%9F%E9%A2%98/80f9d9dc6c0f492fa880379d4a93296a_.png)

【问题 1】（4 分）

使用说明中的词语，给出图 1-1 中的实体 E1-E4 的名称。

【问题 2】（4 分）

使用说明中的词语，给出图 1-2 中的数据存储 D1-D4 的名称。

【问题 3】（3 分）

根据说明和图中术语，补充图 1-2 中缺失的数据流及其起点和终点。

【问题 4】 （4 分）

根据说明中术语，给出图 1-1 中数据流 “客户信息”、“房源信息” 的组成。

### 答案与解析

##  第 2 题

### 问题

阅读下列说明，回答问题 1 至问题 4，将解答填入答题纸的对应栏内。

【说明】

某集团公司拥有多个分公司，为了方便集团公司对分公司各项业务活动进行有效管理，集团公司决定构建一个信息系统以满足公司的业务管理需求。

【需求分析】

1. 分公司关系需要记录的信息包括分公司编号、名称、经理、联系地址和电话。分公司编号唯一标识分公司信息中的每一个元组。每个分公司只有一名经理，负责该分公司的管理工作。每个分公司设立仅为本分公司服务的多个业务部门，如研发部、财务部、采购部、销售部等。

2. 部门关系需要记录的信息包括部门号、部门名称、主管号、电话和分公司编号。部门号唯一标识部门信息中的每一个元组。每个部门只有一名主管，负责部门的管理工作。每个部门有多名员工，每名员工只能隶属于一个部门。

3. 员工关系需要记录的信息包括员工号、姓名、隶属部门、岗位、电话和基本工资。其中，员工号唯一标识员工信息中的每一个元组。岗位包括：经理、主管、研发员、业务员等。

【概念模型设计】

根据需求阶段收集的信息，设计的实体联系图和关系模式 (不完整) 如图 2-1 所示:

![img](.assets/201811%E8%BD%AF%E8%AE%BE%E4%B8%8B%E5%8D%88%E7%9C%9F%E9%A2%98/kTDY58YR9A.png)

【关系模式设计】

分公司（分公司编号，名称，（a），联系地址，电话）

部门（部门号，部门名称，（b），电话）

员工（员工号，姓名（c），电话，基本工资）

【问题 1】 （4 分）

根据问题描述，补充 4 个联系，完善图 2-1 的实体联系图。联系名可用联系 1、联系 2、联系 3 和联系 4 代替，联系的类型为 1:1、1:n 和 m:n （或 1:1、`1:*` 和 `*:*`）。

【问题 2】（5 分）

根据题意，将关系模式中的空 (a)-(c) 补充完整。

【问题 3】（4 分）

给出 “部门” 和 “员工” 关系模式的主键和外键。

【问题 4】（2 分）

假设集团公司要求系统能记录部门历任主管的任职时间和任职年限，那么是否需要在数据库设计时增设一个实体？为什么？

### 答案与解析

## 第 3 题

### 问题

### 答案与解析

## 第 4 题

### 问题

### 答案与解析

## 第 5 题

### 问题

### 答案与解析

## 第 6 题

### 问题

阅读下列说明和 Java 代码，将应填入（n）处的字句写在答题纸的对应栏内。

【说明】

某航空公司的会员积分系统将其会员划分为：普卡 (Basic) 、银卡 (Silver) 和金卡 (Gold) 三个等级。非会员 (Non Member) 可以申请成为普卡会员。会员的等级根据其 一年内累积的里程数进行调整。描述会员等级调整的状态图如图 6-1 所示 。现采用状态 (State) 模式

实现上述场景，得到如图 6-2 所示的类图。

![img](.assets/201811%E8%BD%AF%E8%AE%BE%E4%B8%8B%E5%8D%88%E7%9C%9F%E9%A2%98/fc745d103c9646dda3924a4f9dc6b2cd_.png)

![img](.assets/201811%E8%BD%AF%E8%AE%BE%E4%B8%8B%E5%8D%88%E7%9C%9F%E9%A2%98/425c555be2984aa5a74714d2a20bc7b8_.png)

### 答案与解析

- 试题难度：较难
- 知识点：面向对象程序设计 > Java 程序设计 > 状态模式

- 试题答案：

（1）`abstract double travel(int miles,FrequentFlyer context)`

（2）`context.setState(new CSilver())`

（3）`context.setState(new CGold ())`

（4）`context.setState(new CSilver())`

（5）`context.setState(new CBasic()`

- 试题解析：

由代码可知，（1）空缺少一个抽象方法，根据下面的子类可以发现，子类都有 double travel (int miles, FrequentFlyer context) 方法，是从该抽象类中继承而来，因此（1）空应该补充这个方法，并加上 abstract 修饰。

  （2）（3）（4）（5）可以从状态图中根据相关状态推断出来。

首先，（2）（3）属于普卡会员 CBasic，从状态图和代码可以看到，当里程 >=25000 且 < 5000 时，会员等级应该从普卡会员 CBasic 升级到银卡会员 CSilver，根据后面已有的代码，可以推断表示升级到银卡会员 CSilver 的表示方式为` context.setState (new CSilver ())`；

同理对于（3）空，在普卡会员 CBasic 状态，里程 >=50000 时，应该升级为金卡会员 CGold，此时升级金卡 CGold 的表示方式为 `context.setState (new CGold ())`

以此类推，（4）（5）分别对应金卡会员 CGold 状态下，不同条件，降低的不同等级。因此（4）为降级为银卡会员 CSilver，（5）为降级为普卡会员 CBasic，对应的表示方式分别为 `context.setState (new CSilver ())` 和 `context.setState (new CBasic ())`。
