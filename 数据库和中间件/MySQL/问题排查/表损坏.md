## 表 crashed

问题

```bash
Error: Table './db_name/table_name' is marked as crashed and last (automatic?) repair failed
```

进入到 MySQL 数据库的文件存放目录，比如 cd /data/mysql/

然后执行如下命令：

```javascript
myisamchk --safe-recover -f -r *.MYI

myisamchk -r bigbot_visitor_browser_urls
```

执行完成后，为了保险起见，要将文件的权限改回 MySQL 的运行账号（自行查看），比如 mysql：

```javascript
chown -R mysql:mysql .
```

启动 MySQL：service mysqld start

最后，执行再次自动修复优化命令即可解决：

```javascript
mysqlcheck --auto-repair --optimize --all-databases -p密码
```



```yaml
apiVersion: integreatly.org/v1alpha1
kind: GrafanaDataSource
metadata:
  annotations:
    meta.helm.sh/release-name: aipaas-monitor
    meta.helm.sh/release-namespace: aipaas-system
  name: aipaas-monitor-grafana-datasource
  namespace: aipaas-system
  labels:
    app.kubernetes.io/managed-by: Helm
    grafana.enable: 'true'
spec:
  datasources:
    - access: proxy
      editable: true
      isDefault: true
      jsonData:
        timeInterval: 5s
        tlsSkipVerify: true
      name: Prometheus
      type: prometheus
      url: 'http://vmselect-aipaas-vmcluster:8481/select/10001/prometheus'
      version: 1
  name: middleware.yaml

```



